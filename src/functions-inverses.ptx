<?xml version="1.0" encoding="UTF-8"?>

<!-- This file is part of the book                -->
<!--                                              -->
<!--      A Modeling Approach to Calculus         -->
<!--                                              -->
<!-- Copyright (C) 2017-2019  D. Brian Walton     -->
<!-- See the file COPYING for copying conditions. -->
<section xml:id="functions-inverses">
  <title>Inverse Functions</title>
  <introduction>
    <title>Overview</title>
    <p>
      A function defines a map from one variable <m>A</m> to another variable <m>B</m>, <m>A \mapsto B</m>.
      In the context of the function, we call <m>A</m> the independent variable and call <m>B</m> the dependent variable.
      Knowing <m>A</m>, the function provides the rule to determine <m>B</m>.
      There are times when knowing <m>B</m>, we wish to find the value of <m>A</m>.
      This corresponds to using the function to solve an equation.
      When each value of <m>B</m> results in only a single value of <m>A</m>, the relation defines a new function <m>B \mapsto A</m>.
      In this case, the inverse relation is called the <term>inverse function</term>.
    </p>
    <p>
      This section discusses the general concept of inverse functions.
      We will learn to compute inverse functions for given functions by solving equations and by interpreting tables and graphs.
      Because not all functions are defined by equations that can be solved,
      the definition of an inverse function will need to be more general and will involve function composition.
      We will identify attributes of functions that indicate if an inverse function exists.
      The calibration of instruments using standardized measurements will illustrate a practical application of inverse relations.
    </p>
  </introduction>
  <subsection xml:id="subsec-finding-inverses">
    <title>Finding Inverse Functions</title>
    <p>
      When we think of a function as a map between variables, say <m>f : A \mapsto B</m>,
      we think of <m>f</m> as the rule that goes from an input value on the <m>A</m> number line
      to a corresponding predicted output value on the <m>B</m> number line.
      An <term>inverse function</term> would be a rule that goes in the reverse direction, <m>B \mapsto A</m>.
      A function and its inverse function allow us to go back and forth between the two variables in either direction.
    </p>
    <definition xml:id="definition-inverse-as-reverse-map">
      <statement>
        <p>
          A function representing a map <m>f : A \mapsto B</m> has an <term>inverse function</term>,
          which we write <m>f^{-1} : B \mapsto A</m>,
          if the equation <m>f(a)=b</m> is equivalent to <m>f^{-1}(b)=a</m> for every state <m>(A,B)=(a,b)</m>.
        </p>
      </statement>
    </definition>
    <p>
      We first illustrate the idea of an inverse function with a function defined by a simple map and no formula.
    </p>
    <example>
      <statement>
        <p>
          Imagine a theater that has a promotional wheel so that the price of a ticket is based on which number you spin.
          The prices are listed in the table below.
        </p>
        <sidebyside>
          <tabular>
            <row bottom="major">
              <cell>Spin</cell><cell>Price</cell>
            </row>
            <row>
              <cell>1</cell><cell><dollar/>2</cell>
            </row>
            <row>
              <cell>2</cell><cell><dollar/>5</cell>
            </row>
            <row>
              <cell>3</cell><cell><dollar/>8</cell>
            </row>
            <row>
              <cell>4</cell><cell><dollar/>10</cell>
            </row>
          </tabular>
        </sidebyside>
        <p>
          We introduce variables for the system.
          Let <m>S</m> represent the result of the spin and let <m>P</m> represent the price of a ticket.
          The map <m>f : S \mapsto P</m> can be visualized using number lines.
          It represents the idea that if you know what spin was achieved,
          then you will be able to know the price of the tickets.
        </p>
        <sidebyside width="70%">
          <image>
            <latex-image>
              <!-- CDATA prevents certain LaTeX code from being interpreted as xml -->
              <![CDATA[\tikzset{%
              }
              \begin{tikzpicture}[x=0.5cm]
              \draw[<->] (-3,0) -- (12,0) node[pos=0, left] {$S$};
              \foreach \x in {1, 2, 3, 4} {
                  \draw ({2*\x-3},0.1) -- ({2*\x-3},-0.1) node[below] {\x};
                  \fill ({2*\x-3},0) circle [radius=2pt];
              }
              \draw[<-> ](-3,-2) -- (12,-2) node[pos=0,left] {$P$};
              \foreach \x in {2, 5, 8, 10} {
                  \draw (\x,-1.9) -- (\x,-2.1) node[below] {\x};
                  \fill (\x,-2) circle [radius=2pt];
              }
              \draw [->] (-1,-0.8) -- (2, -1.8);
              \draw [->] (1,-0.8) -- (5, -1.8);
              \draw [->] (3,-0.8) -- (8, -1.8);
              \draw [->] (5,-0.8) -- (10, -1.8);
              \draw [->] (-3.5,-0.5) -- (-3.5, -1.5) node[pos=0.5, left] {$f$};
              \end{tikzpicture}]]>
            </latex-image>
          </image>
        </sidebyside>
        <p>
          The inverse map <m>f^{-1} : P \mapsto S</m> reverses the direction of the arrows.
          The inverse indicates that knowing the price of the tickets is enough information to know the result of the customer's spin.
        </p>
        <sidebyside width="70%">
          <image>
            <latex-image>
              <!-- CDATA prevents certain LaTeX code from being interpreted as xml -->
              <![CDATA[\tikzset{%
              }
              \begin{tikzpicture}[x=0.5cm]
              \draw[<->] (-3,0) -- (12,0) node[pos=0, left] {$S$};
              \foreach \x in {1, 2, 3, 4} {
                  \draw ({2*\x-3},0.1) -- ({2*\x-3},-0.1) node[below] {\x};
                  \fill ({2*\x-3},0) circle [radius=2pt];
              }
              \draw[<-> ](-3,-2) -- (12,-2) node[pos=0,left] {$P$};
              \foreach \x in {2, 5, 8, 10} {
                  \draw (\x,-1.9) -- (\x,-2.1) node[below] {\x};
                  \fill (\x,-2) circle [radius=2pt];
              }
              \draw [<-] (-1,-0.8) -- (2, -1.8);
              \draw [<-] (1,-0.8) -- (5, -1.8);
              \draw [<-] (3,-0.8) -- (8, -1.8);
              \draw [<-] (5,-0.8) -- (10, -1.8);
              \draw [<-] (-3.5,-0.5) -- (-3.5, -1.5) node[pos=0.5, left] {$f^{-1}$};
              \end{tikzpicture}]]>
            </latex-image>
          </image>
        </sidebyside>
        <p>
          Based on this system, we see that <m>f(1)=2</m> because when <m>S=1</m> we have <m>P=2</m>.
          The equivalent inverse equation is <m>f^{-1}(2)=1</m> because a price <m>P=2</m> comes from <m>S=1</m>.
          Similarly, <m>f(2)=5</m> and <m>f^{-1}(5)=2</m> are equivalent.
          Because the system is defined by the table and not a formula, <m>f(5)</m> and <m>f^{-1}(3)</m> each have no meaning.
          In the first case, <m>f(5)</m> has no meaning because <m>S=5</m> is not a possibile spin.
          In the second case, <m>f^{-1}(3)</m> has no meaning because <m>P=3</m> is not a possible ticket price.
        </p>
      </statement>
    </example>
    <p>
      You might have realized a possible problem.
      What happens if two input values map to the same output value?
      We wouldn't know which arrow to follow for the reverse mapping.
      A function that guarantees that different input values always have different output values is called <term>one-to-one</term>.
      A function that is <em>not</em> one-to-one has at least one value that is the output to two or more different input values.
    </p>
    <theorem xml:id="theorem-invertible-one-to-one">
      <statement>
        <p>
          If a function <m>f : A \mapsto C</m> is one-to-one, then the inverse <m>f^{-1}: C \mapsto A</m> is also a function.
          If <m>f</m> is not one-to-one, then the inverse relation is not a function.
        </p>
      </statement>
    </theorem>
    <p>
      When an algebraic equation defines the relation between the variables, we can attempt to solve the equation for either of the variables.
      If both variables can successfully be written as dependent variables, the corresponding formulas define the inverse functions.
    </p>
    <example>
      <statement>
        <p>
          A rope of length 100 centimeters is cut into exactly five pieces
          Two of the pieces are of one length, and the other three pieces are of another length.
          Let <m>d</m> be the length of the ropes in the group of two.
          Let <m>t</m> be the length of the ropes in the group of three.
        </p>
        <p>
          Find the functions <m>f : d \mapsto t</m> and <m>g : t \mapsto d</m>.
          Interpret the meaning of <m>f(10)</m> and <m>g(10)</m>.
        </p>
      </statement>
      <solution>
        <p>
          We start by finding an equation relating <m>d</m> and <m>t</m>.
          The total length of the five pieces of rope added together must equal the original length of rope.
          This results in an equation
          <me>2d + 3t = 100</me>.
        </p>
        <p>
          With this equation, we can solve for each of the state variables in turn.
          Solving for <m>d</m>, we subtract <m>3t</m> and divide by <m>2</m>:
          <me>d = \frac{100-3t}{2}</me>.
          Solving for <m>t</m>, we subtract <m>2d</m> and divide by <m>3</m>:
          <me>t = \frac{100-2d}{3}</me>.
        </p>
        <p>
          The function <m>f</m> was defined as the map <m>d \mapsto t</m>,
          so we use the equation with <m>t</m> as the dependent variable,
          <me>t = f(d) = \frac{100-2d}{3}</me>.
          We can find and interpret <m>f(10)</m>.
          With <m>10</m> as an input, we find <m>f(10) = \frac{100-2(10)}{3} = \frac{80}{3} = 26 \frac{2}{3}</m>.
          To interpret this, we recall that the input represents a value for <m>d</m>.
          The equation represents the state <m>d=10</m> and <m>t=26 \frac{2}{3}</m>
          If the group of two has length 10 centimeters, then the group of three has length <m>26 \frac{2}{3}</m> centimeters.
        </p>
        <p>
          The function <m>g</m> was defined as the map <m>t \mapsto d</m>,
          so we now use the equation with <m>d</m> as the dependent variable,
          <me>d = g(t) = \frac{100-3t}{2}</me>.
          With <m>t=10</m> as an input, we find <m>g(10) = \frac{100-3(10)}{2} = \frac{70}{2} = 35</m>.
          The function tells us that <m>d=35</m> when <m>t=10</m>.
          The group of two has length 35 centimeters whenever the group of three has length <m>10</m> centimeters.
        </p>
        <p>
          The functions <m>f</m> and <m>g</m> are inverse functions to each other.
          If we used a placeholder variable instead of the state variables,
          we would write
          <me>f(x) = \frac{100-2x}{3}</me>
          with its inverse function
          <me>f^{-1}(x) = g(x) = \frac{100-3x}{2}</me>.
          Similarly, <m>g^{-1}(x) = f(x)</m>.
        </p>
      </solution>
    </example>
    <p>
      A function might be defined through a graph.
      You may remember something about the graph of the inverse being a reflection of the graph of the original.
      The following example will help clarify where that idea originates.
    </p>
    <example>
      <statement>
        <p>
          Consider the function defined by the following table.
          Create a table representing the inverse function.
          Compare the graphs of the function and its inverse.
        </p>
        <sidebyside>
          <tabular>
            <col right="major"/>
            <col halign="center"/><col halign="center"/><col halign="center"/>
            <col halign="center"/><col halign="center"/><col halign="center"/>
            <col halign="center"/><col halign="center"/><col halign="center"/>
            <row bottom="major">
              <cell><m>x</m></cell>
              <cell><m>-4</m></cell>
              <cell><m>-3</m></cell>
              <cell><m>-2</m></cell>
              <cell><m>-1</m></cell>
              <cell><m>0</m></cell>
              <cell><m>1</m></cell>
              <cell><m>2</m></cell>
              <cell><m>3</m></cell>
              <cell><m>4</m></cell>
            </row>
            <row>
              <cell><m>f(x)</m></cell>
              <cell><m>4</m></cell>
              <cell><m>2</m></cell>
              <cell><m>1</m></cell>
              <cell><m>0.5</m></cell>
              <cell><m>0</m></cell>
              <cell><m>-0.5</m></cell>
              <cell><m>-1</m></cell>
              <cell><m>-2</m></cell>
              <cell><m>-4</m></cell>
            </row>
          </tabular>
        </sidebyside>
      </statement>
      <solution>
        <p>
          Functions represent maps between variables, so let us say that <m>f : A \mapsto B</m>.
          This gives us a physical interpretation of the values in the table.
          The row for <m>x</m> corresponds to values of the input <m>A</m>.
          The row for <m>f(x)</m> correspond to values of the output <m>B</m>.
          If we were to relabel our table with our variables, we would create the following table.
        </p>
        <sidebyside>
          <tabular>
            <col right="major"/>
            <col halign="center"/><col halign="center"/><col halign="center"/>
            <col halign="center"/><col halign="center"/><col halign="center"/>
            <col halign="center"/><col halign="center"/><col halign="center"/>
            <row bottom="major">
              <cell><m>A</m></cell>
              <cell><m>-4</m></cell>
              <cell><m>-3</m></cell>
              <cell><m>-2</m></cell>
              <cell><m>-1</m></cell>
              <cell><m>0</m></cell>
              <cell><m>1</m></cell>
              <cell><m>2</m></cell>
              <cell><m>3</m></cell>
              <cell><m>4</m></cell>
            </row>
            <row>
              <cell><m>B</m></cell>
              <cell><m>4</m></cell>
              <cell><m>2</m></cell>
              <cell><m>1</m></cell>
              <cell><m>0.5</m></cell>
              <cell><m>0</m></cell>
              <cell><m>-0.5</m></cell>
              <cell><m>-1</m></cell>
              <cell><m>-2</m></cell>
              <cell><m>-4</m></cell>
            </row>
          </tabular>
        </sidebyside>
        <p>
          An inverse function <m>f^{-1}</m> would be the map <m>B \mapsto A</m>.
          The row associated with <m>B</m> now represents the independent variable
          while the row for <m>A</m> represents the dependent variable.
          Because we usually sort the values of the independent variable,
          we would reorder the columns while keeping the states for <m>(A,B)</m> together.
        </p>
        <sidebyside>
          <tabular>
            <col halign="center" right="major"/>
            <col halign="center"/><col halign="center"/><col halign="center"/>
            <col halign="center"/><col halign="center"/><col halign="center"/>
            <col halign="center"/><col halign="center"/><col halign="center"/>
            <row bottom="major">
              <cell><m>x = B</m></cell>
              <cell><m>-4</m></cell>
              <cell><m>-2</m></cell>
              <cell><m>-1</m></cell>
              <cell><m>-0.5</m></cell>
              <cell><m>0</m></cell>
              <cell><m>0.5</m></cell>
              <cell><m>1</m></cell>
              <cell><m>2</m></cell>
              <cell><m>4</m></cell>
            </row>
            <row>
              <cell><m>f^{-1}(x) = A</m></cell>
              <cell><m>4</m></cell>
              <cell><m>3</m></cell>
              <cell><m>2</m></cell>
              <cell><m>1</m></cell>
              <cell><m>0</m></cell>
              <cell><m>-1</m></cell>
              <cell><m>-2</m></cell>
              <cell><m>-3</m></cell>
              <cell><m>-4</m></cell>
            </row>
          </tabular>
        </sidebyside>
        <p>
          A graph of the function is formed by points created from ordered pairs.
          The graph <m>y=f(x)</m> corresponds to points <m>(x,y)=(A,B)</m>,
          because <m>f : A \mapsto B</m>.
          The graph <m>y=f^{-1}(x)</m> corresponds to points <m>(x,y)=(B,A)</m>,
          because <m>f^{-1} : B \mapsto A</m>.
          For example, the state <m>(A,B) = (-1,0.5)</m>
          corresponds to the point <m>(x,y)=(-1,0.5)</m> on the graph <m>y=f(x)</m>
          and to the point <m>(x,y)=(0.5,-1)</m> on the graph <m>y=f^{-1}(x)</m>.
          This state is highlighted using a star in the graphs of the two functions below.
        </p>
        <sidebyside widths="45% 45%">
          <image>
            <description>Graph of the function f</description>
            <latex-image>
              \begin{tikzpicture}
              \begin{axis}
              [
                xmin=-4.5, xmax=4.5, ymin=-4.5, ymax=4.5,
                grid=both, axis lines = center, minor tick num=1,
                xlabel={$x=A$}, ylabel={$y=f(x)=B$},
              ]
              \addplot [only marks, thick, blue] coordinates
              { (-4,4) (-3,2) (-2,1) (0,0) (1,-0.5) (2,-1) (3,-2) (4,-4) };
              \addplot [only marks, mark = star, mark size=4, thick, blue] coordinates
              { (-1,0.5) };
              \end{axis}
              \end{tikzpicture}
            </latex-image>
          </image>
          <image>
            <description>Graph of the inverse function of f</description>
            <latex-image>
              \begin{tikzpicture}
              \begin{axis}
              [
                xmin=-4.5, xmax=4.5, ymin=-4.5, ymax=4.5,
                grid=both, axis lines = center, minor tick num=1,
                xlabel={$x=B$}, ylabel={$y=f^{-1}(x)=A$},
              ]
              \addplot [only marks, thick, blue] coordinates
              { (-4,4) (-2,3) (-1,2) (-0.5,1) (0,0) (1,-2) (2,-3) (4,-4) };
              \addplot [only marks, mark = star, mark size=4, thick, blue] coordinates
              { (0.5,-1) };
              \end{axis}
              \end{tikzpicture}
            </latex-image>
          </image>
        </sidebyside>
      </solution>
    </example>
    <p>
      From our example, we see that the graph of an inverse function takes each point
      on the graph of the original function and reverses the role of the coordinates.
      Reversing the coordinates of every point in the graph geometrically corresponds to reflecting the graph across the line <m>y=x</m>.
      This result can help us remember graphs of inverse pairs.
    </p>
    <example>
      <statement>
        <p>
          The graph of <m>y=2^x</m> is fairly easy to construct.
          It is exponential growth that doubles every integer increment of <m>x</m>.
          So we include, for example, the points <m>(0,1)</m>, <m>(1,2)</m>, and <m>(2,4)</m>.
          The inverse function of the exponential is the logarithm with base <m>b=2</m>.
          The graph of the logarithm is the reflection of the exponential graph across <m>y=x</m>
          and includes the corresponding points <m>(1,0)</m>, <m>(2,1)</m>, and <m>(4,2)</m>.
        </p>
        <sidebyside widths="45% 45%">
          <image>
            <description>Graph of the exponential base 2</description>
            <latex-image>
              \begin{tikzpicture}
              \begin{axis}
              [
                xmin=-4.5, xmax=4.5, ymin=-2.5, ymax=6.5,
                grid=both, axis lines = center, minor tick num=1,
                xlabel={$x$}, ylabel={$y=2^x$},
              ]
              \addplot [domain=-4.5:3, samples=100, thick, blue] {2^x};
              \addplot [only marks, thick, blue] coordinates
              { (0,1) (1,2) (2,4) };
              \end{axis}
              \end{tikzpicture}
            </latex-image>
          </image>
          <image>
            <description>Graph of the logarithm base 2</description>
            <latex-image>
              \begin{tikzpicture}
              \begin{axis}
              [
                xmin=-2.5, xmax=6.5, ymin=-4.5, ymax=4.5,
                grid=both, axis lines = center, minor tick num=1,
                xlabel={$x$}, ylabel={$y=\log_2(x)$},
              ]
              \addplot [domain=-4.5:3, samples=100, thick, blue] ({2^x},{x});
              \addplot [only marks, thick, blue] coordinates
              { (1,0) (2,1) (4,2) };
              \end{axis}
              \end{tikzpicture}
            </latex-image>
          </image>
        </sidebyside>
      </statement>
    </example>
    <p>
      Now consider a function that is defined as a composition of operations.
      When we solve the equation to find the inverse function,
      we will discover that the inverse corresponds to applying the inverses of the original operations in the reverse order.
    </p>
    <example>
      <statement>
        <p>
          Consider the function <m>\displaystyle f(x) = \frac{5}{3x+2}</m> corresponding to a map
          <me>a \overset{f}{\mapsto} b = \frac{5}{3a+2}</me>.
          The inverse function is found by solving for <m>a</m> in the equation.
          Cross-multiplying the equation gives
          <me>b(3a+2) = 5</me>.
          Dividing by <m>b</m> then gives
          <me>3a+2 = \frac{5}{b}</me>
          from which we get
          <me>a = \frac{\frac{5}{b}-2}{3}</me>.
        </p>
        <p>
          Although we would normally simplify this equation,
          we have successfully solved for <m>a</m> and so have a formula for the inverse,
          <me>b \overset{f^{-1}}{\mapsto} a = \frac{ \frac{5}{b}-2}{3}</me>.
          To simplify the fraction so that there is not a fraction in the numerator,
          we can multiply top and bottom by the value <m>b</m> giving
          <me>a = \frac{5 - 2b}{3b} = \frac{5}{3b} - \frac{2}{3}</me>.
          Using a placeholder variable, like <m>x</m>, instead of the physical variables <m>a</m> and <m>b</m>,
          the pair of inverse functions are
          <md>
            <mrow>f(x) = \frac{5}{3x+2},</mrow>
            <mrow>f^{-1}(x) = \frac{\frac{5}{x}-2}{3} = \frac{5}{3x} - \frac{2}{3}.</mrow>
          </md>
        </p>
      </statement>
    </example>
    <p>
      Let us consider the operations involved in the previous example.
      The function <m>\displaystyle f(x) = \frac{5}{3x+2}</m> involved the following sequence of operations:
      <ol>
        <li>Take the value of <m>x</m>.</li>
        <li>Multiply by <m>3</m>.</li>
        <li>Add <m>2</m>.</li>
        <li>Divide <m>5</m> by the result.</li>
      </ol>
      The inverse function <m>\displaystyle f^{-1}(x) = \frac{\frac{5}{x}-2}{3}</m> did the inverse operations in the reverse order:
      <ol>
        <li>Take the value of <m>x</m>.</li>
        <li>Divide <m>5</m> by the value.</li>
        <li>Subtract <m>2</m>.</li>
        <li>Divide by <m>3</m>.</li>
      </ol>
    </p>
    <p>
      This should make sense.
      Solving the equation for the original independent variable is accomplished by starting at the end and working backwards.
      This is summarized in the following theorem.
      The proof captures the idea of solving the equation by working in reverse.
    </p>
    <theorem xml:id="thm-inverse-of-composition">
      <statement>
        <p>
          Suppose <m>f(x) = g \circ h(x)</m> and <m>g</m> and <m>h</m> each have inverse functions.
          Then <m>f^{-1}(x) = h^{-1} \circ g^{-1}(x)</m>.
        </p>
      </statement>
      <proof>
        <p>
          The composition corresponds to a chain.
          Suppose the independent variable is <m>a</m> and the ultimate dependent variable is <m>c</m> so that <m>f: a \mapsto c</m>.
          Then there is an intermediate variable <m>b = h(a)</m> so that <m>c = g(b)</m>.
          The inverse function <m>f^{-1}</m> is the map going from <m>c</m> to <m>a</m>, <m>f^{-1}: c \mapsto a</m>.
          Because <m>g</m> has an inverse and <m>c=g(b)</m>, we can apply <m>c \mapsto b = g^{-1}(c)</m>.
          Then, because <m>h</m> has an inverse and <m>b = h(a)</m>, we can similarly apply <m>b \mapsto a = h^{-1}(b)</m>.
          Combining the chain, we have
          <me>a = h^{-1}(b) = h^{-1}\big( g^{-1}(c) \big) = h^{-1} \circ g^{-1} (c)</me>.
          The result follows by using a generic independent variable <m>x</m>.
        </p>
      </proof>
    </theorem>
  </subsection>
  <subsection>
    <title>Inverse Functions and Composition</title>
    <p>
      When we discussed inverse functions earlier in <xref ref="subsection-inverse-functions"/>,
      we thought of them as inverse maps.
      Given an equation defining the map <m>x \mapsto y</m>,
      if we could solve the equation for the input <m>x</m> as a single expression involving <m>y</m>,
      then this new equation defined the inverse function.
      Inverse functions undo one another's operations.
    </p>
    <p>
      Let us consider the calculations involved in the previous example.
      The function <m>f</m> took an input and performed the following operations in order:
      <ul>
        <li>Multiply by 3.</li>
        <li>Add 2.</li>
      </ul>
      The inverse function <m>f^{-1}</m> took an input and performed related operations:
      <ul>
        <li>Subtract 2.</li>
        <li>Divide by 3.</li>
      </ul>
      The functions are inverse because they will exactly undo one another's operations.
    </p>
    <p>
      Consider what happens if you create a chain and apply <m>f^{-1}</m> immediately after <m>f</m>:
      <ul>
        <li>Multiply by 3.</li>
        <li>Add 2.</li>
        <li>Subtract 2.</li>
        <li>Divide by 3.</li>
      </ul>
      The middle two steps cancel one another's effects, so this would be the same as the simpler chain of steps:
      <ul>
        <li>Multiply by 3.</li>
        <li>Divide by 3.</li>
      </ul>
      Again, the operations cancel each other out.
      The output will always be the same as the original input,
      <me>f^{-1} \circ f(x) = x</me>.
      The following interactive figure shows this composition as a chain of maps.
    </p>
    <figure>
      <caption>
        Composition <m>y=f^{-1} \circ f(a)</m>, corresponding to chain <m>a \overset{f}\mapsto b \overset{f^{-1}}\mapsto y</m>.
        As the functions are inverses, this always yields <m>y=a</m>.
      </caption>
      <jsxgraph xml:id="jsx-fcn-intro-chain-inverse1" platform="jsxgraph" width="75%" aspect="4:2">
        <input>
          var jcm2 = {
            outer : function(a) { var b; b=3*a+2; return b; },
            inner : function(b) { var a; a=(b-2)/3; return a; },
            input : { name:'a', color:'blue', value:0 },
            middle : { name:'b', color:'orange'},
            output : { name:'y', color:'red' },
          };
          createChainMap(jcm2, 'jsx-fcn-intro-chain-inverse1');
        </input>
      </jsxgraph>
    </figure>
    <p>
      A composition in the reverse order, <m>f \circ f^{-1}(x)</m>, also results in exact cancellation.
    </p>
    <figure>
      <caption>
        Composition <m>y=f \circ g(b)</m>, corresponding to chain
        <m>b \overset{g}\mapsto a \overset{f}\mapsto y</m>.
        As the functions are inverses, this always yields <m>y=b</m>.
      </caption>
      <jsxgraph xml:id="jsx-fcn-intro-chain-inverse2" width="75%" aspect="4:2">
        <input>
        var jcm2 = {
          outer : function(b) { var a; a=(b-2)/3; return a; },
          inner : function(a) { var b; b=3*a+2; return b; },
          input : { name:'b', color:'blue', value:0 },
          middle : { name:'a', color:'orange'},
          output : { name:'y', color:'red' },
        };
        createChainMap(jcm2, 'jsx-fcn-intro-chain-inverse2');
        </input>
      </jsxgraph>
    </figure>
    <p>
      Simplifying the composition of inverse functions algebraically reveals the cancellation directly.
    </p>
    <example>
      <statement>
        <p>
        For <m>f(x)=3x+2</m> and <m>\displaystyle f^{-1}(x)=\frac{x-2}{3}</m>
        compute and simplify <m>f \circ g(x)</m> and <m>g \circ f(x)</m>.
        </p>
      </statement>
      <solution>
        <p>
        Using substitution and algebraic simplification, we find the values requested.
        <md>
          <mrow>f \circ g(x) &amp; = f\big(g(x)\big) </mrow>
          <mrow> &amp;= f\Big( \frac{x-2}{3} \Big) &amp; \hbox{substitute $g(x)$} </mrow>
          <mrow> &amp;= 3\Big( \frac{x-2}{3} \Big)+2 &amp; \hbox{substitute $f(\square)$} </mrow>
          <mrow> &amp;= x-2+2 = x </mrow>
        </md>
        <md>
          <mrow>g \circ f(x) &amp; = g\big(f(x)\big) </mrow>
          <mrow> &amp;= g\big( 3x+2 \big) &amp; \hbox{substitute $f(x)$} </mrow>
          <mrow> &amp;= \frac{(3x+2)-2}{3} &amp; \hbox{substitute $g(\square)$} </mrow>
          <mrow> &amp;= \frac{3x}{3} = x </mrow>
        </md>
        </p>
      </solution>
    </example>
    <p>
      Inverse functions will always simplify in this way:
      the composition of inverse functions cancel to just leave the input.
      Functions are not always defined by an equation, so we shouldn't define inverses through solving equations.
      Mathematicians actually define inverse functions in terms of the property of composition.
    </p>
    <definition xml:id="inverse-functions">
      <statement>
        <p>
          Two functions <m>f</m> and <m>g</m> are inverses of one another,
          and we write <m>g=f^{-1}</m> and <m>f=g^{-1}</m>,
          if for every <m>x</m> in the domain of <m>g</m>, we have
          <me>f \circ g(x) = f\big(g(x)\big) = x,</me>
          and for every <m>x</m> in the domain of <m>f</m>, we have
          <me>g \circ f(x) = g \big(f(x)\big) = x.</me>
        </p>
      </statement>
    </definition>
    <p>
      It is time for a comment about real variables.
      In science, variables represent physical measurements and the variables are the objects of study.
      These variables can be related by functions.
      However, in mathematics, it is the function itself that is being studied.
      For simplicity, mathematics textbooks have adopted an approach
      where <m>x</m> is almost universally the independent variable of every function
      and <m>y</m> is the dependent variable.
      This makes it easier to remember the role each variable plays,
      but it can lead to confusion in actual applications.
    </p>
    <example>
      <statement>
        <p>
          An enzyme is a protein that helps catalyze a chemical reaction.
          For many enzymes, the rate of reaction <m>R</m> and the concentration of the reactant <m>C</m>
          satisfy a relation called Michaelis-Menten kinetics
          <me>R = \frac{aC}{C+K},</me>
          where <m>a</m> and <m>K</m> are parameters that characterize the particular reaction.
          Physically, we require <m>C \ge 0</m>.
          In mathematics, this relation might be characterized by a function
          <me>f(x) = \frac{ax}{x+K}.</me>
          We would then say <m>R = f(C)</m>.
          This is equivalent to mapping notation
          <me>C \overset{f}{\mapsto} R = \frac{aC}{C+K}.</me>
        </p>
        <p>
          To find the inverse function, most mathematics textbooks say to write <m>y=f(x)</m>,
          switch all <m>x</m> and <m>y</m> and then solve for <m>y</m>.
          The only reason to switch the variables is to preserve <m>x</m> as the independent variable of the relation.
          This is an artificial requirement.
          We might as well just solve for <m>C</m> as a function of <m>R</m>.
          Start by cross-multiplying to eliminate the denominator in the equation.
          <md>
            <mrow>R = \frac{aC}{C+K}</mrow>
            <mrow>R(C+K) = aC</mrow>
            <mrow>RC+KR = aC</mrow>
          </md>
          Because we are solving for <m>C</m>, we need to collect <m>C</m> terms on one side of the equation and then factor.
          <md>
            <mrow>RC-aC = -KR</mrow>
            <mrow>C(R-a) = -KR</mrow>
            <mrow>C = \frac{-KR}{R-a}</mrow>
          </md>
          Multiplying the numerator and denominator each by <m>-1</m>,
          we get an equivalent and simpler explicit function
          <me>R \overset{g}{\mapsto}C = \frac{KR}{a-R}.</me>
          As the functions come from the same relation, we know <m>g = f^{-1}</m>.
        </p>
        <p>
          This equation shows that <m>C</m> is the dependent variable
          and is a function of the independent variable <m>R</m>.
          Mathematically, using <m>x</m> as the independent variable,
          we would have written <me>f^{-1}(x) = \frac{Kx}{a-x}</me>.
          However, this equation loses the context of what the input variable <m>x</m> and the output value represent.
          In applications, it is better to include the variables so that their interpretation can be preserved.
        </p>
      </statement>
    </example>
    <p>
      Recall that the composition of inverse functions should result in the input of the inner function.
      Consider how that applies in the context of actual variables.
      Recall the earlier example relating a reaction rate <m>R</m> and the reactant concentration <m>C</m>.
      We had inverse functions <m>C \overset{f}{\mapsto} R</m> and <m>R \overset{g}{\mapsto} C</m>.
      Composition applies these operations one immediately after the other, with the inner function applied first.
      Composition <m>f \circ g</m> applies <m>g</m> to the input followed by <m>f</m>,
      which would be written in mapping notation with the variables as
      <me>R \overset{g}{\mapsto} C \overset{f}{\mapsto} R</me>.
      The original input is the value <m>R</m> and the final output is also the value <m>R</m>.
      So the comoposition is equal to the original input.
      Algebra should verify that this actually works.
    </p>
    <example>
      <statement>
        <p>
        For the inverse functions of Michaelis-Menten kinetics,
        <md>
          <mrow> C \overset{f}{\mapsto} R = \frac{aC}{C+K},</mrow>
          <mrow> R \overset{g}{\mapsto} C = \frac{KR}{a-R},</mrow>
        </md>
        show that the composition of functions cancel.
        </p>
      </statement>
      <solution>
        <p>
        To compute <m>f \circ g(x)</m>, we use <m>g(x)</m> as the input to <m>f</m>.
        Using meaningful variables, <m>g</m> takes a reaction rate as input,
        so we compute <m>f(g(R))</m> and simplify.
        Recall that function evaluation is just substitution of the input in a formula.
        <md>
          <mrow>f\big(g(R)\big) &amp;= f\big( \frac{KR}{a-R}\big) </mrow>
          <mrow> &amp;= \frac{a\big( \frac{KR}{a-R}\big)}{\big( \frac{KR}{a-R}\big)+K}</mrow>
        </md>
        We replaced the <m>C</m> as input to <m>f</m> with the formula for <m>g(R)</m>.
        To simplify this, we can clear the denominator of the fractions inside the fraction
        by multiplying numerator and denominator by <m>(a-R)</m>.
        <md>
          <mrow>f\big(g(R)\big) &amp;= \frac{a\big( \frac{KR}{a-R}\big)(a-R)}{\big( \frac{KR}{a-R}+K\big)(a-R)}</mrow>
          <mrow> &amp;= \frac{aKR}{KR + K(a-R)}</mrow>
          <mrow> &amp;= \frac{aKR}{KR + Ka-KR}</mrow>
          <mrow> &amp;= \frac{aKR}{Ka} </mrow>
          <mrow> &amp;= R</mrow>
        </md>
        Using the placeholder variable <m>x</m>, we have <m>f \circ g(x)=x</m>, as required for inverse functions.
        </p>
        <p>
        The algebraic verification that <m>g</m> undoes the evaluation of <m>f</m>,
        <me>C \overset{f}{\mapsto} R \overset{g}{\mapsto} C,</me>
        follows a similar calculation.
        To compute <m>g \circ f(x)</m>, we use <m>f(x)</m> as the input to <m>g</m>.
        In context, <m>f</m> takes a reactant concentration <m>C</m> as input,
        so we compute <m>g(f(C))</m> and simplify.
        <md>
          <mrow>g\big(f(C)\big) &amp;= g\big(\frac{aC}{C+K}\big) </mrow>
          <mrow> &amp;= \frac{K\big( \frac{aC}{C+K}\big)}{a-\big( \frac{aC}{C+K}\big)}</mrow>
          <mrow> &amp;= \frac{K\big( \frac{aC}{C+K}\big)(C+K)}{\big(a- \frac{aC}{C+K}\big)(C+K)}</mrow>
          <mrow> &amp;= \frac{aKC}{a(C+K) - aC}</mrow>
          <mrow> &amp;= \frac{aKC}{aC+aK -aC}</mrow>
          <mrow> &amp;= \frac{aKC}{aK} </mrow>
          <mrow> &amp;= C</mrow>
        </md>
        </p>
      </solution>
    </example>
  </subsection>
  <subsection>
    <title>Summary</title>
    <p>
    <ul>
      <li>
        A function is a relation between an independent variable (input)
        and a dependent variable (output) such that for each value of the input,
        there is exactly one value for the output.
      </li>
      <li>
        An equation in two variables defines a relation.
        When we can solve the equation for one variable (dependent)
        as a single expression of the other variable (independent),
        the expression defines an explicit function.
      </li>
      <li>
        A linear function <m>x \mapsto y</m> is a relationship between variables that have a constant rate of change.
        The rate of change equals the slope between two states <m>(x_1,y_1)</m> and <m>(x_2,y_2)</m>
        and is the ratio of the change in the output to the change in the input:
        <me>m = \frac{\Delta y}{\Delta x} = \frac{y_2-y_1}{x_2-x_1}</me>.
      </li>
      <li>
        Function mapping notation <m>x \overset{f}{\mapsto} y</m> indicates
        that <m>y</m> is a function of <m>x</m> and <m>f</m> is the name of the function.
      </li>
      <li>
        Function evaluation notation <m>f(\square)</m> uses substitution of
        whatever appears between the parentheses <m>(\square)</m> in place of the independent variable.
      </li>
      <li>
        Composition <m>f \circ g</m> is evaluation of the outer function <m>f</m>
        with an input using the output of the inner function <m>g</m>,
        <me>f \circ g(x) = f\big(g(x)\big)</me>.
        As maps, if <m>g:x \mapsto u</m> and <m>f:u \mapsto y</m>, then
        <me>x \overset{f \circ g}\mapsto y \quad = \quad x \overset{g}\mapsto u \overset{f}\mapsto y.</me>
      </li>
      <li>
        <p>
          Two functions <m>f</m> and <m>g</m> are inverses of one another if
          <m>f \circ g(x) = x</m> for all <m>x</m> in the domain of <m>g</m>
          <em>and</em>
          <m>g \circ f(x) = x</m> for all <m>x</m> in the domain of <m>f</m>.
          This means that inverse functions cancel one another when applied in a chain:
          <me>f \circ f^{-1}(x) = x \quad \text{and} \quad f^{-1}\circ f(x) = x</me>.
        </p>
      </li>
      <li>
        If an equation can be solved for each variable in terms of the other
        (<eg/>, <m>x \mapsto y</m> and <m>y \mapsto x</m>), the relation is one-to-one.
        The two resulting functions are inverse functions.
      </li>
    </ul>
    </p>
  </subsection>
  <exercises>
    <exercisegroup>
      <introduction>
        <p>
        For each equation, determine if the relation defines functions <m>x \mapsto y</m> and <m>y \mapsto x</m>
        by solving the equation for the dependent variable.
        </p>
      </introduction>
      <exercise>
        <statement>
          <p>
          For the equation <m>3x-5y=10</m>, do the following.
          <ol>
            <li>Determine if <m>x \mapsto y</m>.</li>
            <li>Determine if <m>y \mapsto x</m>.</li>
          </ol>
          </p>
        </statement>
      </exercise>
      <exercise>
        <statement>
          <p>
          For the equation <m>2xy - 6 = 4x - 3y</m>, do the following.
          <ol>
            <li>Determine if <m>x \mapsto y</m>.</li>
            <li>Determine if <m>y \mapsto x</m>.</li>
          </ol>
          </p>
        </statement>
      </exercise>
      <exercise>
        <statement>
          <p>
          For the equation <m>6x+4y-3xy=0</m>, do the following.
          <ol>
            <li>Determine if <m>x \mapsto y</m>.</li>
            <li>Determine if <m>y \mapsto x</m>.</li>
          </ol>
          </p>
        </statement>
      </exercise>
      <exercise>
        <statement>
          <p>
          For the equation <m>x^2+3y=25</m>, do the following.
          <ol>
            <li>Determine if <m>x \mapsto y</m>.</li>
            <li>Determine if <m>y \mapsto x</m>.</li>
          </ol>
          </p>
        </statement>
      </exercise>
    </exercisegroup>
    <exercisegroup>
      <introduction>
        <p>
        Given a function, compute and simplify the expressions listed.
        </p>
      </introduction>
      <exercise>
        <statement>
          <p>
          Suppose <m>f(x)=\frac{2}{3}x+4</m>.
          Simplify each of the following expressions.
          </p>
          <ol>
            <li><m>f(5)</m></li>
            <li><m>f(t)</m></li>
            <li><m>f(t^2-1)</m></li>
            <li><m>3f(2x)-8</m></li>
          </ol>
        </statement>
      </exercise>
      <exercise>
        <statement>
          <p>
          Suppose <m>\displaystyle g(x)=\frac{4}{x+1}</m>.
          Simplify each of the following.
          </p>
          <ol>
            <li><m>g(1)</m></li>
            <li><m>g(\frac{1}{x})</m></li>
            <li><m>\displaystyle \frac{1}{g(x)}</m></li>
            <li><m>g\big(\frac{1}{x}-1\big)</m></li>
          </ol>
        </statement>
      </exercise>
      <exercise>
        <statement>
          <p>
          Suppose <m>f(x)=2x-5</m>, <m>g(x)=\frac{1}{2}x+5</m>, and <m>h(x)=\frac{1}{2}(x+5)</m>.
          Simplify each of the following.
          <ol>
            <li><m>f \circ g(x)</m></li>
            <li><m>f \circ h(x)</m></li>
            <li><m>g \circ f(x)</m></li>
            <li><m>g \circ h(x)</m></li>
          </ol> What conclusion can be drawn?
          </p>
        </statement>
      </exercise>
      <exercise>
        <statement>
          <p>
          Suppose <m>\displaystyle f(x)=\frac{3}{x+2}</m> and <m>\displaystyle g(x)=\frac{3}{x}-2</m>.
          Simplify each of the following.
          <ol>
            <li><m>f(x-2)</m></li>
            <li><m>g(\frac{1}{x})</m></li>
            <li><m>f \circ g(x)</m></li>
            <li><m>g \circ f(x)</m></li>
          </ol> Is <m>g = f^{-1}</m>?
          </p>
        </statement>
      </exercise>
    </exercisegroup>
    <exercisegroup>
      <introduction>
      <p>Applications</p>
      </introduction>
      <exercise>
        <statement>
          <p>
          Let <m>C</m> be the temperature measured in degrees Celsius,
          and let <m>F</m> be the temperature measured in degrees Fahrenheit.
          The function <m>g(x) = \frac{9}{5}x + 32</m> defines the map <m>g : C \mapsto F</m>,
          and <m>h(x) = \frac{5}{9}(x-32)</m> defines <m>h : F \mapsto C</m>.
          <ol>
            <li>
              Use algebra to verify that <m>g</m> and <m>h</m> are inverse functions.
            </li>
            <li>
              What is the value and interpretation of <m>g(30)</m>?
            </li>
            <li>
              What is the value and interpretation of <m>g \circ h(30)</m>?
            </li>
          </ol>
          </p>
        </statement>
      </exercise>
      <exercise>
        <statement>
          <p>
          A spring force scale uses the distance a spring is stretched
          to determine the force that is applied to the spring.
          We calibrate the scale by using known forces (<eg/>, weights)
          and record the corresponding location of the tip on a ruler.
          Let <m>F</m> be the force (Newtons) applied to the spring
          and let <m>L</m> be the corresponding location (centimeters).
          The following table is used for calibration.
          </p>
          <sidebyside margins="auto">
          <tabular>
            <col right="major"/> <col right="minor"/> <col/>
            <row bottom="major">
              <cell><m>F</m> (N)</cell>
              <cell>0</cell>
              <cell>10.0</cell>
            </row>
            <row>
              <cell><m>L</m> (cm)</cell>
              <cell>20.0</cell>
              <cell>42.5</cell>
            </row>
          </tabular>
          </sidebyside>
          <p>
          <ol>
            <li>
              Find a linear equation relating the variables <m>F</m> and <m>L</m>.
            </li>
            <li>
              Determine functions <m>g</m> and <m>h</m> so that
              <m>F \overset{g}{\mapsto} L</m> and <m>L \overset{h}{\mapsto} F</m>.
              What are the corresponding equations using evaluation notation?
            </li>
            <li>
              Suppose a force of 5 <quantity><unit base="newton"/></quantity> is applied to the spring.
              What will be the location of the tip of the ruler? Which function was used?
            </li>
            <li>
              Suppose a force is applied that results in the tip
              having a location of 28.7 <quantity><unit prefix="centi" base="meter"/></quantity>.
              What was the force? Which function was used?
            </li>
          </ol>
          </p>
        </statement>
      </exercise>
      <exercise>
        <statement>
          <p>
          The perimeter <m>P</m> and area <m>A</m> of a square are each
          functions of the length of the sides <m>s</m> by <m>P=4s</m> and <m>A=s^2</m>.
          Find perimeter as a function of area, <m>P \mapsto A</m>.
          </p>
        </statement>
      </exercise>
      <exercise>
        <statement>
          <p>
          The volume of a sphere is related to the radius of the sphere
          by the equation <m>V = \frac{4}{3} \pi r^3</m>.
          Suppose the radius is a function of time defined by <m>r = 1+2t</m>.
          Find the volume as a function of time, <m>t \mapsto V</m>.
          </p>
        </statement>
      </exercise>
      <exercise>
        <statement>
          <p>
          The cost <m>C</m> of materials for a project depends on the required area <m>A</m> of materials needed.
          The unit price is <dollar/>3.50 per <quantity><unit base="meter" exp="2"/></quantity>.
          The project involves making two squares, each of them having sides with length <m>s</m> (meters).
          <ol>
            <li>Find <m>A \overset{f}{\mapsto} C</m>.</li>
            <li>Find <m>s \overset{g}{\mapsto} A</m>.</li>
            <li>
              <p>
              Use composition to find <m>s \mapsto C</m>.
              Is this <m>f \circ g</m> or <m>g \circ f</m>?
              </p>
            </li>
            <li>
              <p>
              How much would a project with <m>s=4</m> cost?
              How much area of materials will be required?
              What function is used for each calculation?
              </p>
            </li>
          </ol>
          </p>
        </statement>
      </exercise>
    </exercisegroup>
  </exercises>
</section>
