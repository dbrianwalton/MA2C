<?xml version="1.0" encoding="UTF-8"?>

<!-- This file is part of the book                -->
<!--                                              -->
<!--      A Modeling Approach to Calculus         -->
<!--                                              -->
<!-- Copyright (C) 2015-2018  D. Brian Walton          -->
<!-- See the file COPYING for copying conditions. -->
   
<section xml:id="sequence-increments">
  <title>Sequence Increments</title>

  <subsection>
    <title>Overview</title>
    <p>
      In the introductory section of this chapter, we learned that the increments of a sequence,
      calculated using the backward difference,
      can be used to analyze the monotonicity and concavity of a sequence.
      Those examples all focused on sequences with given values.
    </p>
    <p>
      In this section, we continue our study of increments by looking at sequences defined explicitly and recursively.
      For a sequence defined with an explicit formula,
      we will compute the increments using that formula and index substitution.
      For a sequence defined with a projection function,
      we will compute the increments as a function of the previous sequence value.
      Once a formula or function for the increments has been computed,
      we will solve inequalities to characterize the monotonicity and concavity of the sequence.
    </p>
  </subsection>
  <subsection>
    <title>Increments of Explicit Sequences</title>
    <p>
      When we know the explicit formula for a sequence <m>x_n</m>,
      we can find a corresponding formula for the increment of that sequence <m>\nabla x_n</m>.
      Recall that an explicit formula gives us a function mapping the value of the index to the value of the sequence,
      <me>n \mapsto x_n</me>.
      We can think of <m>n</m> and <m>x_n</m> as state variables.
      We can also think of <m>x_{n-1}</m> as a state variable, one that represents the <em>previous</em> value of the sequence.
      The expanded state of the system becomes <m>(n, x_n, x_{n-1})</m>.
      We want to include yet another state variable, the increment, <m>\nabla x_n</m>, which is defined by the backward difference
      <me>\nabla x_n = x_{n} - x_{n-1}</me>.
    </p>
    <p>
      We can find explicit formulas for these additional variables by making a substitution on the index.
      Suppose the map <m>n \mapsto x_n</m> were a function, <m>S:n \mapsto x_n</m>.
      The symbol <m>S(n)</m> would represent the explicit formula for <m>x_n</m>.
      Then <m>S(n-1)</m> would represent the formula for <m>x_{n-1}</m>,
      calculated by substituting the expression <m>n-1</m> everywhere the original variable <m>n</m> appeared in the formula.
      The process of substituting an expression in the place of the independent variable of a function is called <term>composition</term>.
    </p>
    <example>
      <statement>
        <p>
          Consider the sequence defined explicitly,
          <me>x = (3n+5)_{n=0}^{\infty}</me>.
          Find explicit formulas for <m>x_{n-1}</m> and <m>\nabla x_{n}</m>.
        </p>
      </statement>
      <solution>
        <p>
          The explicit formula for the sequence, <m>x_n = 3n+5</m>, defines a function,
          <me>S(n) = 3n+5</me>.
          The independent variable in the function is a placeholder for the input expression,
          <me>S(\square) = 3 \square + 5</me>.
          We can find the formula for the previous term using a substitution <m>\square = n-1</m>,
          <me>x_{n-1} = S(n-1) = 3(n-1) + 5.</me>
          Simplifying the expression to a sum, this gives
          <me>x_{n-1} = 3n+2</me>.
          Formally, because <m>x</m> has its first index <m>n=0</m>, there is no value <m>x_{-1}</m>.
          The formula for <m>x_{n-1}</m> is only valid for <m>n=1, 2, \ldots</m>.
        </p>
        <p>
          The increment <m>\nabla x_n</m> is defined by the backward difference <m>\nabla x_n = x_n - x_{n-1}</m>.
          To calculate the backward difference, 
          we substitute the explicit formulas in place of the state variables <m>x_n</m> and <m>x_{n-1}<m> and simplify:
          <md>
            <mrow> \nabla x_n &amp; = x_n - x_{n-1} </mrow>
            <mrow> &amp;= \big(3n+5\big) - \big(3n+2\big) </mrow>
            <mrow> &amp;= 3n+5 - 3n - 2 </mrow>
            <mrow> &amp;= 3 </mrow>.
          </md>
          Again, this only applies for <m>n=1,2,\ldots</m>.
          Because the increments were constant, we realize that <m>x</m> was an arithmetic sequence with <m>\beta = 3</m>.
        </p>
        <p>
          To illustrate the connection between the formulas with which we are now working and the actual values of the sequence,
          consider the actual values of the sequence, <me>x = (5, 8, 11, 14, 17, \ldots)</me>.
          Now, consider the table created using the explicit formulas above.
        </p>
        <sidebyside>
          <tabular>
            <row bottom="major">
              <cell><m>n</m></cell>
              <cell><m>x_n</m></cell>
              <cell><m>x_{n-1}</m></cell>
            </row>
            <row>
              <cell>0</cell>
              <cell><m>3(0)+5 = 5</m></cell>
              <cell>undefined</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell><m>3(1)+5 = 8</m></cell>
              <cell><m>3(1)+2=  5</m></cell>
            </row>
            <row>
              <cell>2</cell>
              <cell><m>3(2)+5 = 11</m></cell>
              <cell><m>3(2)+2=  8</m></cell>
            </row>
            <row>
              <cell>3</cell>
              <cell><m>3(3)+5 = 14</m></cell>
              <cell><m>3(3)+2=  11</m></cell>
            </row>
          </tabular>
        </sidebyside>
        <p>
          You should notice how the formula for <m>x_{n-1}</m> uses the <em>current</em> value of <m>n</m> to find the value of the <em>previous</em> value of the sequence.
        </p>
      </solution>
    </example>
    <example>
      <statement>
        <p>
          Consider the sequence defined explicitly,
          <me>u = (n^2+2n)_{n=0}^{\infty}</me>.
          Find explicit formulas for <m>u_{n-1}</m> and <m>\nabla u_{n}</m>.
        </p>
      </statement>
      <solution>
        <p>
          The explicit formula for the sequence, <m>u_n = n^2+2n</m>, defines a function,
          <me>S(n) = n^2+2n</me>.
          The independent variable in the function is a placeholder for the input expression,
          <me>S(\square) = \square^2 + 2 \square</me>.
          We can find the formula for the previous term using a substitution <m>\square = n-1</m>,
          <me>u_{n-1} = S(n-1) = (n-1)^2+2(n-1).</me>
          Expanding the square and then simplifying the expression to a sum, this gives
          <md>
            <mrow>u_{n-1} &amp;= (n-1)(n-1)+2(n-1)</mrow>
            <mrow> &amp;= n^2-2n+1+2n-2</mrow>
            <mrow> &amp;= n^2-1</mrow>
          </md>
        </p>
        <p>
          The increment <m>\nabla u_n</m> is defined by the backward difference <m>\nabla u_n = u_n - u_{n-1}</m>.
          To calculate the backward difference, 
          we substitute the explicit formulas in place of the state variables <m>u_n</m> and <m>u_{n-1}<m> and simplify:
          <md>
            <mrow> \nabla u_n &amp; = u_n - u_{n-1} </mrow>
            <mrow> &amp;= \big(n^2+2n\big) - \big(n^2-1\big) </mrow>
            <mrow> &amp;= n^2+2n-n^2+1 </mrow>
            <mrow> &amp;= 2n+1 </mrow>.
          </md>
        </p>
        <p>
          We can illustrate that the formulas using a table.
          Notice that the formula <m>u_{n-1}</m> calculate the previous value using the current index,
          and the formula for <m>\nabla u_n</m> calculates the increment of the sequence using the index.
        </p>
        <sidebyside>
          <tabular>
            <row bottom="major">
              <cell><m>n</m></cell>
              <cell><m>u_n</m></cell>
              <cell><m>u_{n-1}</m></cell>
              <cell><m>\nabla u_n</m></cell>
            </row>
            <row>
              <cell>0</cell>
              <cell><m>(0)^2+2(0) = 0</m></cell>
              <cell>undefined</cell>
              <cell>undefined</cell>
            </row>
            <row>
              <cell>1</cell>
              <cell><m>(1)^2+2(1) = 3</m></cell>
              <cell><m>(1)^2-1= 0</m></cell>
              <cell><m>2(1)+1= 3</m></cell>
            </row>
            <row>
              <cell>2</cell>
              <cell><m>(2)^2+2(2) = 8</m></cell>
              <cell><m>(2)^2-1= 3</m></cell>
              <cell><m>2(2)+1= 5</m></cell>
            </row>
            <row>
              <cell>3</cell>
              <cell><m>(3)^2+2(3) = 15</m></cell>
              <cell><m>(3)^2-1= 8</m></cell>
              <cell><m>2(3)+1= 7</m></cell>
            </row>
          </tabular>
        </sidebyside>
      </solution>
    </example>
  </subsection>
  <subsection>
    <title>Increments of Recursive Sequences</title>
    <p>
    </p>
  </subsection>
  <subsection>
    <title>Summary</title>
    <p>
    <ul>
      <li>
        <p>
        </p>
      </li>
    </ul>
    </p>
  </subsection>
  <exercises>
    <exercisegroup>
      <introduction>
        <p>
        For the following finite sequences, find the intervals of monotonicity and concavity.
        Also, identify the index and values of the local maximum and minimum points.
        Graph the sequences and compare with your results.
        </p>
      </introduction>
      <exercise>
        <statement>
          <p><m>a = (a_n)_{n=1}^{10} = (35, 55, 70, 80, 85, 85, 80, 70, 55, 35)</m></p>
        </statement>
      </exercise>
      <exercise>
        <statement>
          <p><m>b = (b_i)_{i=0}^{9} = (-8,-5,-4,-5,-8,-9,-8,-5,-1,4)</m></p>
        </statement>
      </exercise>
      <exercise>
        <statement>
          <p><m>c = (c_t)_{t=-3}^{6} = (5,8,10,10,10,9,8,7,8,10)</m></p>
        </statement>
      </exercise>
    </exercisegroup>
    <exercisegroup>
      <introduction>
        <p>
          For the following sequences, identify a pattern using backward differences.
          Use the pattern to predict the next two values of the sequence.
        </p>
      </introduction>
      <exercise>
        <statement>
          <p><m>u = (u_k)_{n=0}^{\infty} = (-8,-13,-16,-17,-16,-13,-8,\ldots)</m></p>
        </statement>
      </exercise>
      <exercise>
        <statement>
          <p><m>v = (v_j)_{j=1}^{\infty} = (6,0,-6,-10,-10,-4,10,\ldots)</m></p>
        </statement>
      </exercise>
      <exercise>
        <statement>
          <p><m>w = (w_n)_{n=0}^{\infty} = (-3,-6,-5,1,12,27,44,60,71,\ldots)</m></p>
        </statement>
      </exercise>
    </exercisegroup>
  </exercises>
 </section>