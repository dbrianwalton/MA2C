<?xml version="1.0" encoding="UTF-8"?>

<!-- This file is part of the book                -->
<!--                                              -->
<!--      A Modeling Approach to Calculus         -->
<!--                                              -->
<!-- Copyright (C) 2015-2017  D. Brian Walton     -->
<!-- See the file COPYING for copying conditions. -->
   
<section xml:id="accumulation-functions">
  <title>Functions Defined by Accumulation</title>

  <subsection>
    <title>Overview</title>
    
    <p>
    When a function <m>f(x)</m> is integrable on an interval <m>I</m> 
    and <m>a \in I</m> is any value in that interval, 
    then for any other value <m>b \in I</m>, 
    we can compute the definite integral of <m>f(x)</m> from <m>a</m> to <m>b</m>. 
    Because the value depends on the value of <m>b</m>, 
    we can think of this definite integral as a function of the upper limit <m>b</m>. 
    We call such a function the accumulation function of <m>f(x)</m> relative to <m>x=a</m>.
    </p>
    
    <p>
    This section introduces how to describe accumulation functions 
    according to the properties of the integrand (rate) function. 
    We learn the definitions for increasing and decreasing functions 
    as well as the definition of concavity. 
    Using the Mean Value Theorem for Integrals, 
    we will be able to classify the behavior of accumulation functions 
    according to the behavior of its corresponding integrand (rate) function.
    </p>
    
  </subsection>
   
  <subsection>
    <title>Accumulation Functions</title>
    
    <p>
    In our introduction, we used the variable <m>b</m> 
    as the upper limit of the accumulation function. 
    Because we usually think of <m>x</m> as our default independent variable, 
    we would like to use <m>x</m> as the upper limit of the integral. 
    But then we would have the variable <m>x</m> 
    playing two different roles <mdash/> the upper limit of the integral and the variable of integration. 
    To keep a single role for the variable, 
    we always require that when using a variable in a limit of integration, 
    the integration variable must be chosen to be a dummy variable 
    that does not have another contextual meaning.
    </p>
    
    <definition xml:id='defn-accumulation-function'>
      <title>Accumulation Function</title>
      <statement>
        <p>
        Let <m>f(x)</m> represent a rate of change or rate of accumulation 
        with independent variable <m>x</m>. 
        The <term>accumulation function</term> <m>A(x)</m> relative to <m>x=a</m> 
        with an initial value <m>A(a) = A_0</m>
        is defined as <me> A(x) = A_0 + \int_{a}^{x} f(z) \, dz, </me> 
        where <m>z</m> can be replaced with any other dummy variable (but not <m>x</m>). 
        The function is defined so long as <m>f</m> is integrable 
        on the interval containing both <m>x</m> and <m>a</m>.
        </p>
      </statement>
    </definition>
    
    <p>
    Once an accumulation function is defined, 
    it can be used to evaluate particular definite integrals, 
    even if the starting limit does not match the point 
    used to define the accumulation.
    </p>
    
    <theorem xml:id="thm-definite-integral-accumulation-change">
      <title>Integration as the Difference in Accumulation</title>
      <statement>
        <p>
        Suppose <m>f(x)</m> is integrable on an interval that contains <m>a</m>,
        <m>b</m> and <m>c</m>.
        If <m>A(x)</m> is an accumulation of <m>f(x)</m> relative to <m>x=c</m>,
        <me> A(x) = A_0 + \int_{c}^{x} f(z) \, dz, </me> 
        then <me> \int_{a}^{b} f(x) \, dx = A(b) - A(a). </me>
        </p>
      </statement>
    </theorem>
    
    <p>
    Notice that in the theorem, the definite integral 
    used the independent variable <m>x</m> as the variable of integration. 
    This is acceptable because the integral is a specific definite integral 
    and the variable <m>x</m> plays no role other than the integration variable.
    We could have written using another dummy variable to get 
    <me> \int_{a}^{b} f(z) \, dz = A(b) - A(a), </me>
    but the result would have been exactly the same.
    </p>
    
    <p>
    The integrand function <m>f</m> for an accumulation <m>A</m> is 
    the rate of accumulation or rate of change.
    When we learn about derivatives in the next chapter,
    we will learn a different conception of rate of change
    that is called the derivative, written <m>A'(x)</m>.
    Fortunately, the 
    <xref ref="fundamental-theorem-of-calculus">Fundamental Theorem of Calculus</xref> 
    will show that the two different conceptions agree with one another.
    That is, for any accumulation function
    <me>A(x) = A_0 + \int_{c}^{x} f(z) \, dz</me>,
    the derivative <m>A'(x)</m> and the rate of accumulation <m>f(x)</m> are the same.
    For consistency of discussion later, 
    we will call <m>f(x)</m> the derivative of the accumulation function <m>A(x)</m>.
    </p>
    
    <p>
    Some accumulation functions can be expressed simply 
    using other well known formulas. 
    For example, we previously discovered the following rules 
    which we can now identify as accumulation functions. 
    <md>
      <mrow> \int_{0}^{x} 1 \, dz = x </mrow>
      <mrow> \int_{0}^{x} z \, dz = \frac{1}{2} x^2 </mrow>
      <mrow> \int_{0}^{x} z^2 \, dz = \frac{1}{3} x^3 </mrow>
      <mrow> \int_{0}^{x} z^3 \, dz = \frac{1}{4} x^4 </mrow>
    </md> 
    That is, for a constant rate <m>f(x)=1</m>, 
    the accumulated change relative to <m>x=0</m> is <m>A(x)=x</m>. 
    Similarly, for the rate <m>f(x)=x</m>, 
    the accumulated change relative to <m>x=0</m> is <m>A(x) = \frac{1}{2}x^2</m>.
    </p>
    
    <example>
      <statement>
        <p>
        Suppose <m>A(x)</m> has a rate <m>A'(x)=2x^2-3</m> and initial value <m>A(0)=4</m>.
        Express <m>A(x)</m> in terms of a definite integral.
        Then apply the properties of integrals and the elementary accumulation functions
        to find an algebraic formula for <m>A(x)</m>.
        </p>
      </statement>
      <solution>
        <p>
        Because we are given <m>A(0)=4</m>, we will write
        <me>A(x) = A(0) + \int_0^x f(z) \, dz</me>
        where <m>f(x)=A'(x)</m> is the desired rate of accumulation.
        That is,
        <me>A(x) = 4 + \int_0^x 2z^2-3 \, dz.</me>
        </p>
        <p>
        To find the algebraic formula for <m>A(x)</m>, we will rewrite
        the definite integral as a linear combination of the elementary rates <m>z^2</m> and <m>1</m>.
        That is, <m>f(z) = 2z^2-3 = 2 \cdot z^2 - 3 \cdot 1</m> so that 
        the linearity property of integrals allows us to use the elementary accumulation functions.
        <md>
          <mrow>A(x) &amp;= 4 + 2 \cdot \int_0^x z^2 \, dz - 3 \cdot \int_0^x 1 \, dz</mrow>
          <mrow> &amp;= 4 + 2 \cdot \left(\frac{1}{3}x^3 \right) - 3 \cdot \left( x \right)</mrow>
          <mrow> &amp;= \frac{2}{3} x^3 - 3x + 4 </mrow>
        </md>
        </p>
      </solution>
    </example>
  </subsection>
  
  <subsection>
    <title>Monotonicity and Concavity</title>
    
    <p>
    We first learned to describe the monotonicity of functions
    in <xref ref="functions-behavior"/>.
    Recall from <xref ref="increasing-decreasing"/> that a function <m>f</m>
    is <term>increasing</term> on a set <m>S</m> if for every <m>x_1,x_2 \in S</m>,
    <me> x_1 \lt x_2 \quad \implies \quad f(x_1) \lt f(x_2)</me>,
    and decreasing if 
    <me> x_1 \lt x_2 \quad \implies \quad f(x_1) \gt f(x_2)</me>.
    We can rewrite these inequalities in terms of the <em>increment of change</em> of <m>f</m>:
    <md>
      <mrow> f(x_1) \lt f(x_2) \quad \Leftrightarrow \quad f(x_2) - f(x_1) \gt 0, </mrow>
      <mrow> f(x_1) \gt f(x_2) \quad \Leftrightarrow \quad f(x_2) - f(x_1) \lt 0. </mrow>
    </md>
    That is, an increasing function is associated with positive increments of change
    and a decreasing function is associated with negative increments of change.
    </p>
    
    <p>
    When a function <m>f(x)</m> is described as an accumulation, 
    it can be written as the integral of its rate of accumulation or derivative <m>f'(x)</m>.
    Thus, <me>f(x_2) - f(x_1) = \int_{x_1}^{x_2} f'(x) \, dx.</me>
    Knowing the sign of the rate of accumulation can then be used 
    to determine intervals of monotonicity. 
    </p>
    
    <theorem xml:id="thm-monotonicity-from-rate">
      <title>Monotonicity Test for Accumulation Functions</title>
      <statement>
        <p>
        Suppose that <m>f(x)</m> is an accumulation function 
        with corresponding rate function <m>f('x)</m>, 
        and suppose that <m>f'(x)</m> is continuous on <m>(a,b)</m>
        with limits at the endpoints.
        </p>
        <ul>
          <li>
            <p>
            If <m>f'(x) = 0</m> for all <m>x \in (a,b)</m>, 
            then <m>f(x)</m> is constant on <m>[a,b]</m>.
            </p>
          </li>
          <li>
            <p>
            If <m>f'(x) \gt 0</m> for all <m>x \in (a,b)</m>,
            then <m>f(x)</m> is increasing on <m>[a,b]</m>.
            </p>
          </li>
          <li>
            <p>
            If <m>f'(x) \lt 0</m> for all <m>x \in (a,b)</m>, 
            then <m>f(x)</m> is decreasing on <m>[a,b]</m>.
            </p>
          </li>
        </ul>
      </statement>
      <proof>
        <p>
        Let <m>x_1,x_2 \in [a,b]</m> satisfy <m>x_1 \lt x_2</m>.
        Because <m>f</m> is an accumulation of <m>f'</m>, 
        we know that 
        <me>f(x_2) - f(x_1) = \int_{x_1}^{x_2} f'(x) \, dx.</me>
        We now treat each case individually.
        </p>
        <p>
        If <m>f'(x)=0</m> for all <m>x \in (a,b)</m>, then
        <me>f(x_2) - f(x_1) = \int_{x_1}^{x_2} 0 \, dx = 0</me>
        and <m>f(x_2) = f(x_1)</m>.
        Because <m>x_1</m> and <m>x_2</m> were arbitrary,
        <m>f(x)</m> must have the same value for any <m>x \in [a,b]</m>.
        </p>
        <p>
        If <m>f'(x) \gt 0</m> for all <m>x \in (a,b)</m>, 
        then <xref ref="thm-integral-inequality"/> allows us to form a bound
        <me>\int_{x_1}^{x_2} f'(x) \, dx \gt \int_{x_1}^{x_2} 0 \, dx = 0</me>.
        This guarantees that <m>f(x_2)-f(x_1) \gt 0</m>
        so that <m>f</m> is increasing on <m>[a,b]</m>.
        </p>
        <p>
        If <m>f'(x) \lt 0</m> for all <m>x \in (a,b)</m>, 
        then again <xref ref="thm-integral-inequality"/> allows us to form a bound
        <me>\int_{x_1}^{x_2} f'(x) \, dx \lt \int_{x_1}^{x_2} 0 \, dx = 0</me>,
        so that <m>f(x_2)-f(x_1) \gt 0</m>.
        Thus, <m>f</m> is decreasing on <m>[a,b]</m>.
        </p>
      </proof>
    </theorem>
    
    <example>
      <statement>
        <p>
        Suppose <m>\displaystyle f(x) = \int_1^x t^2-5t+6 \, dt</m>.
        Describe the monotonicity of <m>f</m>.
        </p>
      </statement>
      <solution>
        <p>
        The rate of accumulation for <m>f</m> is given by <m>f'(x)=x^2-5x+6</m>.
        (Recall the integral uses a dummy variable; we change it back to <m>x</m> for analysis.)
        Because <m>f'</m> is continuous everywhere, the domain for <m>f</m> is <m>(-\infty,\infty)</m>.
        The starting location <m>x=1</m> simply gives the initial value with <m>f(1)=0</m>.
        </p>
        <p>
        We find the signs of <m>f'</m> by first solving <m>f'(x)=0</m> 
        and then testing the resulting intervals.
        <md>
          <mrow>x^2-5x+6 = 0</mrow>
          <mrow>(x-2)(x-3) = 0</mrow>
          <mrow>x-2=0 \text{ or } x-3=0</mrow>
          <mrow>x=2 \text{ or } x=3</mrow>
        </md>
        The intervals to test are <m>(-\infty,2)</m>, <m>(2,3)</m>, and <m>(3,\infty)</m>.
        We can test actual values or consider the signs of the factors on each interval.
        The results are summarized on the number-line summary.
        </p>
        <sidebyside width="70%" margins="auto">
          <image>
            <latex-image-code>
            <!-- CDATA prevents certain LaTeX code from being interpreted as xml -->
            <![CDATA[\tikzset{%
            }
            \begin{tikzpicture}[x=1cm,y=1cm]
            \draw[<->] (0,0) -- (5,0)
              node[pos=1, above right] {$f'(x)=(x-2)(x-3)$}
              node[pos=1, below right] {$x$};
            \draw (2, -0.1) -- (2,0.1) 
              node[pos=0, below] {$2$}
              node[pos=1, above] {$0$};
            \draw (3, -0.1) -- (3,0.1)
              node[pos=0, below] {$3$}
              node[pos=1, above] {$0$};
            \node [above] at (0.5,0.1) {$+$};
            \node [above] at (2.5,0.1) {$-$};
            \node [above] at (4,0.1) {$+$};
            \end{tikzpicture}]]>
            </latex-image-code>
          </image>
        </sidebyside>
        <p>
        We can now interpret the sign analysis of <m>f'(x)</m>.
        <ul>
          <li>
          <m>f'(x) \gt 0</m> on <m>(-\infty,2)</m> implies
          that <m>f(x)</m> is <em>increasing</em> on <m>(-\infty,2]</m>.
          </li>
          <li>
          <m>f'(x) \lt 0</m> on <m>(2,3)</m> implies 
          that <m>f(x)</m> is <em>decreasing</em> on <m>[2,3]</m>.
          </li>
          <li><m>f'(x) \gt 0</m> on <m>(3,\infty)</m>
          implies that <m>f(x)</m> is <em>increasing</em> on <m>[3,\infty)</m>.
          </li>
        </ul>
        A graph of <m>y=f(x)</m> is shown below consistent with this analysis
        and the initial value <m>f(1)=0</m>.
        </p>
        <sidebyside width="70%" margins="auto">
          <image>
            <latex-image-code>
              \begin{tikzpicture}
              \begin{axis}
              [
                xmin=-2, xmax=5,
                ymin=-2, ymax=2,
                xlabel={$x$}, ylabel={$y$},
                axis lines=center,
              ]
              \addplot [domain=-2:5,samples=80,thick,blue]
                {x^3/3-5*x^2/2+6*x-23/6};
              \addplot [only marks, blue, samples at={2,3}] 
                {x^3/3-5*x^2/2+6*x-23/6}
                node [pos=0,above] {$x=2$}
                node [pos=1,below] {$x=3$};
              \end{axis};
              \end{tikzpicture}
            </latex-image-code>
          </image>
        </sidebyside>
      </solution>
    </example>
    
    <example>
      <statement>
        <p>
        Suppose <m>\displaystyle g(x) = \int_1^x \frac{t-4}{t+2} \, dt</m>.
        Describe the monotonicity of <m>g</m>.
        </p>
      </statement>
      <solution>
        <p>
        The rate of accumulation for <m>g</m> is given by <m>\displaystyle g'(x)=\frac{x-4}{x+2}</m>.
        The function <m>g'</m> has a discontinuity at <m>x=-2</m>
        which corresponds to a vertical asymptote.
        The domain of the accumulation function is the interval containing <m>x=1</m>
        up to this discontinuity, which is the interval <m>(-2,\infty)</m>.
        </p>
        <p>
        To determine monotonicity, we need to find the sign of <m>g'(x)</m>.
        Intervals are determined by the roots and discontinuities.
        The root is the solution to <m>\displaystyle g'(x)=\frac{x-4}{x+2}=0</m> 
        which occurs when <m>x-4=0</m> or <m>x=4</m>. 
        Using this root and the discontinuity at <m>x=-2</m>, 
        the intervals to test are <m>(-2,4)</m> and <m>(4,\infty)</m>.
        <md>
          <mrow>g'(0) &amp;= \frac{0-4}{0+2} = -2</mrow>
          <mrow>g'(6) &amp;= \frac{6-4}{6+2} = \frac{1}{4}</mrow>
        </md>
        This could be summarized on a number-line as shown below.
        </p>
        <sidebyside width="70%" margins="auto">
          <image>
            <latex-image-code>
            <!-- CDATA prevents certain LaTeX code from being interpreted as xml -->
            <![CDATA[\tikzset{%
            }
            \begin{tikzpicture}[x=0.5cm,y=1cm]
            \draw[|->] (-2,0) -- (8,0)
              node[pos=1, above right] {$\displaystyle f'(x)=\frac{x-4}{x+2}$}
              node[pos=1, below right] {$x$};
            \draw (-2, -0.1) -- (-2,0.1) 
              node[pos=0, below] {$-2$}
              node[pos=1, above] {VA};
            \draw (4, -0.1) -- (4,0.1)
              node[pos=0, below] {$4$}
              node[pos=1, above] {$0$};
            \node [above] at (1,0.1) {$-$};
            \node [above] at (6,0.1) {$+$};
            \end{tikzpicture}]]>
            </latex-image-code>
          </image>
        </sidebyside>
        <p>
        We can now interpret the sign analysis of <m>g'(x)</m>.
        <ul>
          <li>
          <m>g'(x) \lt 0</m> on <m>(-2,4)</m> implies 
          <m>g(x)</m> is <em>decreasing</em> on <m>(-2,4]</m>.
          (We can not include <m>x=-2</m> because of the vertical asymptote.)
          </li>
          <li>
          <m>g'(x) \gt 0</m> on <m>(4,\infty)</m> implies 
          <m>g(x)</m> is <em>increasing</em> on <m>[4,\infty)</m>.
          </li>
        </ul>
        A graph of <m>g(x)</m> is shown below 
        that is consistent with this analysis.
        </p>
        <sidebyside width="70%" margins="auto">
          <image>
            <latex-image-code>
              \begin{tikzpicture}
              \begin{axis}
              [
                xmin=-4, xmax=12,
                ymin=-10, ymax=5,
                xlabel={$x$}, ylabel={$y$},
                axis lines=center,
              ]
              \addplot [domain=-2:12,samples=80,thick,blue]
                {x - 6*ln(x+2)};
              \addplot [only marks, blue, samples at={4}] 
                {x - 6*ln(x+2)}
                node [pos=1,below] {$x=4$};
              \end{axis};
              \end{tikzpicture}
            </latex-image-code>
          </image>
        </sidebyside>
      </solution>
    </example>
    
    <p>
    Concavity was introduced as a way to describe how a function bends.
    However, our original 
    <xref ref="concavity-average-rates">definition of concavity</xref>
    also involved inequalities,
    stating that the rate of change itself was increasing or decreasing.
    For an accumulation function, 
    the rate of accumulation will control concavity.
    The following theorem suggests that we try to think of the rate of accumulation
    as being, on its own, another accumulation of another function
    which we call the <term>second derivative</term> of the accumulation.
    </p>
    
    <theorem xml:id="concavity-from-second-derivative">
      <title>Concavity Test for Accumulation Functions</title>
      <statement>
        <p>
        Suppose that <m>f(x)</m> is an accumulation function 
        with corresponding rate function <m>f('x)</m>
        and that <m>f'(x)</m> is itself an accumulation function
        with its rate function <m>f''(x)</m>.
        Suppose that <m>f''(x)</m> is continuous on <m>(a,b)</m>
        with limits at the endpoints.
        </p>
        <ul>
          <li>
            <p>
            If <m>f''(x) = 0</m> for all <m>x \in (a,b)</m>, 
            then <m>f(x)</m> is linear on <m>[a,b]</m>.
            </p>
          </li>
          <li>
            <p>
            If <m>f''(x) \gt 0</m> for all <m>x \in (a,b)</m>,
            then <m>f(x)</m> is concave up on <m>[a,b]</m>.
            </p>
          </li>
          <li>
            <p>
            If <m>f''(x) \lt 0</m> for all <m>x \in (a,b)</m>, 
            then <m>f(x)</m> is concave down on <m>[a,b]</m>.
            </p>
          </li>
        </ul>
      </statement>
      <proof>
        <p>
        We will prove that <m>f'(x)</m> is constant, increasing, or decreasing, 
        in each of the respective cases.
        In fact, this is often adopted as the de facto definition for concavity.
        Because <m>f'</m> is an accumulation with rate <m>f''</m>,
        we only need to apply <xref ref="thm-monotonicity-from-rate"/>.
        The relationship between the monotonicity of <m>f'</m> and 
        the changes of the average rates of change given in the original
        definition of concavity requires the <xref text="title" ref="mean-value-theorem"/>.
        </p>
      </proof>
    </theorem>
    
    <p>
    At this point, we have not learned how to find the rate 
    so that a function can be written as an accumulation.
    This requires computing derivatives.
    However, we can use technology to help us out.
    </p>
    <example>
      <statement>
        <p>
        Use technology to find derivatives in order 
        to describe the monotonicity and concavity of
        <m>f(x) = x^3 - 4x.</m>
        </p>
      </statement>
      <solution>
        <p>
        We start by writing <m>f(x)</m> as an accumulation.
        The rate of accumulation <m>f'(x)</m> is a derivative,
        which we find using technology.
        </p>
        <sage>
          <input>
          f(x) = x^3-4*x
          Df(x) = derivative(f(x),x)
          show(Df(x))
          </input>
          <output>
          3*x^2-4
          </output>
        </sage>
        <p>
        Knowing the rate <m>f'(x)=3x^2-4</m> and an initial value, say <m>f(0)=0^3-4(0)=0</m>,
        we can write
        <me>f(x) = 0 + \int_0^x 3z^2-4 \, dz = \int_0^x 3z^2-4 \, dz</me>.
        Monotonicity is determined by the signs of <m>f'(x)=3x^2-4</m>.
        <md>
          <mrow>3x^2-4 = 0</mrow>
          <mrow>3x^2=4</mrow>
          <mrow>x^2 = \frac{4}{3}</mrow>
          <mrow>x = \pm \sqrt{\frac{4}{3}}</mrow>
          <mrow>x = \pm \frac{2}{\sqrt{3}}</mrow>
        </md>
        We can test the sign of <m>f'(x)</m> in each resulting interval 
        and summarize the results on a number line.
        </p>
        <sidebyside width="70%" margins="auto">
          <image>
            <latex-image-code>
            <!-- CDATA prevents certain LaTeX code from being interpreted as xml -->
            <![CDATA[\tikzset{%
            }
            \begin{tikzpicture}[x=0.7cm,y=0.7cm]
            \draw[<->] (-3,0) -- (3,0)
              node[pos=1, above right] {$f'(x)=3x^2-4$}
              node[pos=1, below right] {$x$};
            \draw (-1, -0.1) -- (-1,0.1) 
              node[pos=0, below] {$-\frac{2}{\sqrt{3}}$}
              node[pos=1, above] {$0$};
            \draw (1, -0.1) -- (1,0.1)
              node[pos=0, below] {$+\frac{2}{\sqrt{3}}$}
              node[pos=1, above] {$0$};
            \node [above] at (-2,0.1) {$+$};
            \node [above] at (0,0.1) {$-$};
            \node [above] at (2,0.1) {$+$};
            \end{tikzpicture}]]>
            </latex-image-code>
          </image>
        </sidebyside>
        <p>
        Interpreting the sign analysis tells us that <m>f(x)=x^3-4x</m> is
        <em>increasing</em> on the interval <m>(-\infty,-\frac{2}{\sqrt{3}}]</m>,
        <em>decreasing</em> on the interval <m>[-\frac{2}{\sqrt{3}},\frac{2}{\sqrt{3}}]</m>,
        and <em>increasing</em> on the interval <m>[\frac{2}{\sqrt{3}},\infty)</m>.
        </p>
        <p>
        To analyze concavity, we need to write <m>f'(x)=3x^2-4</m> as an accumulation function.
        Technology helps us find the derivative, which requires one additional line.
        </p>
        <sage>
          <input>
          f(x) = x^3-4*x
          Df(x) = derivative(f(x),x)
          D2f(x) = derivative(Df(x),x)
          show(D2f(x))
          </input>
          <output>
          6*x
          </output>
        </sage>
        <p>
        Now that we know <m>f''(x)=6x</m>, and we have an initial value <m>f'(0)=3(0)^2-4 = -4</m>,
        we can write
        <me>f'(x) = -4 + \int_0^x 6z \, dz</me>.
        The signs of <m>f''(x) = 6x</m> change at <m>x=0</m>, summarized by the sign analysis below.
        </p>
        <sidebyside width="70%" margins="auto">
          <image>
            <latex-image-code>
            <!-- CDATA prevents certain LaTeX code from being interpreted as xml -->
            <![CDATA[\tikzset{%
            }
            \begin{tikzpicture}[x=0.7cm,y=0.7cm]
            \draw[<->] (-3,0) -- (3,0)
              node[pos=1, above right] {$f''(x)=6x$}
              node[pos=1, below right] {$x$};
            \draw (0, -0.1) -- (0,0.1) 
              node[pos=0, below] {$0$}
              node[pos=1, above] {$0$};
            \node [above] at (-2,0.1) {$-$};
            \node [above] at (2,0.1) {$+$};
            \end{tikzpicture}]]>
            </latex-image-code>
          </image>
        </sidebyside>
        <p>
        Interpreting the sign analysis of the second derivative, we describe the concavity.
        The function <m>f(x)</m> is
        concave down on <m>(-\infty,0]</m>
        and concave up on <m>[0,\infty)</m>.
        </p>
        <p>
        A graph illustrating these features is shown below.
        The curve is colored differently, depending on concavity.
        To the left of <m>x=0</m> (blue), the curve is concave down.
        To the right of <m>x=0</m> (orange), the curve is concave up.
        The local extremes at <m>x=\pm \frac{2}{\sqrt{3}}</m> are also labeled.
        </p>
        <sidebyside width="70%" margins="auto">
          <image>
            <latex-image-code>
              \begin{tikzpicture}
              \begin{axis}[
                axis lines=center,
                xlabel={$x$},
                xmin=-3, xmax=3
              ]
              \addplot [domain=-3:0,samples=51,thick,blue] {x^3-4*x};
              \addplot [domain=0:3,samples=51,thick,orange] {x^3-4*x};
              \addplot [only marks,samples at={-1.155,0,1.155},blue] {x^3-4*x}
                node [pos=0,above,black] {$x=-\frac{2}{\sqrt{3}}$}
                node [pos=1,below,black] {$x=\frac{2}{\sqrt{3}}$};
              \end{axis}
              \end{tikzpicture}
            </latex-image-code>
          </image>
        </sidebyside>
      </solution>
    </example>
    
    <p>
    When we can view a graph of the rate of accumulation (the derivative),
    we can interpret the features of that rate 
    to describe the behavior of the accumulation function itself.
    </p>
    
    <example>
      <statement>
        <p>
        The graph of the accumulation rate <m>f'(x)</m> for a function <m>f(x)</m>
        is shown in the figure below.
        Describe the monotonicity and concavity 
        and sketch a graph of the accumulation function <m>y=f(x)</m>
        with initial value <m>f(0)=3</m>.
        </p>
        <sidebyside width="60%" margins="auto">
          <image>
            <latex-image-code>
              <!-- CDATA prevents certain LaTeX code from being interpreted as xml -->
              <![CDATA[\tikzset{%
              }
              \begin{tikzpicture}
              \begin{axis} [
              xmin=-3, xmax=6,
              xlabel={$x$}, ylabel={$f'(x)$},
              grid=both, minor tick num={1},
              ]
              \addplot[no marks, black] coordinates {
              (-3,0)
              (6,0)
              };
              \addplot[no marks, blue, thick] coordinates {
              (-3,-2)
              (0,4)
              (1,4)
              (4,-2)
              (6, 2)
              };
              \end{axis}
              \end{tikzpicture}]]>
            </latex-image-code>
          </image>
        </sidebyside>
      </statement>
      <solution>
        <p>
        The graph of <m>f'(x)</m> can be used to determine 
        the signs of <m>f'(x)</m> that are used to find the monotonicity of <m>f(x)</m>
        while the monotonicity of <m>f'(x)</m> can be used 
        to find the concavity of <m>f(x)</m>.
        Computing the signed area of the graph can be used to determine
        the actual increments of change.
        </p>
        <p>
        The signs of <m>f'(x)</m> based on the graph are summarized
        on the following number-line summary.
        </p>
        <sidebyside width="70%" margins="auto">
          <image>
            <latex-image-code>
            <!-- CDATA prevents certain LaTeX code from being interpreted as xml -->
            <![CDATA[\tikzset{%
            }
            \begin{tikzpicture}[x=0.7cm,y=0.7cm]
            \draw[|-|] (-3,0) -- (6,0)
              node[pos=1, above right] {$f'(x)$}
              node[pos=1, below right] {$x$};
            \draw (-2, -0.1) -- (-2,0.1) 
              node[pos=0, below] {$-2$}
              node[pos=1, above] {$0$};
            \draw (3, -0.1) -- (3,0.1) 
              node[pos=0, below] {$3$}
              node[pos=1, above] {$0$};
            \draw (5, -0.1) -- (5,0.1) 
              node[pos=0, below] {$5$}
              node[pos=1, above] {$0$};
            \node [above] at (-2.5,0.1) {$-$};
            \node [above] at (0.5,0.1) {$+$};
            \node [above] at (4,0.1) {$-$};
            \node [above] at (5.5,0.1) {$+$};
            \end{tikzpicture}]]>
            </latex-image-code>
          </image>
        </sidebyside>
        <p>
        We interpret this to make the following conclusions about monotonicity: 
        <m>f(x)</m> is
        <ul>
          <li>increasing on intervals <m>[-2,3]</m> and <m>[5,6]</m>,</li>
          <li>decreasing on intervals <m>[-3,-2]</m> and <m>[3,5]</m>.</li>
        </ul>
        From the graph, we can not determine what happens beyond the visible window.
        </p>
        <p>
        In addition, the graph allows us to identify the monotonicity of <m>f'</m>.
        We see that <m>f'(x)</m> is
        <ul>
          <li>increasing on intervals <m>[-3,0]</m> and <m>[4,6]</m>,</li>
          <li>constant on the interval <m>[0,1]</m>,</li>
          <li>decreasing on the interval <m>[1,4]</m>.</li>
        </ul>
        We interpret this to give us concavity: <m>f(x)</m> is
        <ul>
          <li>concave up on intervals <m>[-3,0]</m> and <m>[4,6]</m>,</li>
          <li>linear on the interval <m>[0,1]</m> with slope <m>f'(x)=4</m>,</li>
          <li>concave down on the interval <m>[1,4]</m>.</li>
        </ul>
        </p>
        <p>
        The definite integral of <m>f'(x)</m> over an interval,
        which computes the signed area, 
        determines the increment of change in <m>f(x)</m>.
        The graph of <m>f'(x)</m> is made of straight line segments, 
        so we can compute the integrals using simple geometric formulas 
        for the areas of triangles, rectangles, and trapezoids.
        <md>
          <mrow> f(-2) - f(-3) &amp;= \int_{-3}^{-2} f'(x) \, dx </mrow>
          <mrow> &amp;= -\textstyle \frac{1}{2}(1)(2) = -1</mrow>
          <mrow> f(0) - f(-2) &amp;= \int_{-2}^{0} f'(x) \, dx </mrow>
          <mrow> &amp;= +\textstyle \frac{1}{2}(2)(4) = 4</mrow>
          <mrow> f(1) - f(0) &amp;= \int_{0}^{1} f'(x) \, dx </mrow>
          <mrow> &amp;= +\textstyle (1)(4) = 4</mrow>
          <mrow> f(3) - f(1) &amp;= \int_{1}^{3} f'(x) \, dx </mrow>
          <mrow> &amp;= +\textstyle \frac{1}{2}(2)(4) = 4</mrow>
          <mrow> f(4) - f(3) &amp;= \int_{3}^{4} f'(x) \, dx </mrow>
          <mrow> &amp;= -\textstyle \frac{1}{2}(1)(2) = -1</mrow>
          <mrow> f(5) - f(4) &amp;= \int_{4}^{5} f'(x) \, dx </mrow>
          <mrow> &amp;= -\textstyle \frac{1}{2}(1)(2) = -1</mrow>
          <mrow> f(6) - f(5) &amp;= \int_{5}^{6} f'(x) \, dx </mrow>
          <mrow> &amp;= +\textstyle \frac{1}{2}(1)(2) = 1</mrow>
        </md>
        </p>
        <p>
        The initial value <m>f(0)=3</m> gives us a starting point for the graph.
        We can use the increments computed from the definite integrals
        to find the values of <m>f(x)</m> at several specific points.
        For example, because <m>f(1)-f(0)=4</m>, we know that <m>f(1)=7</m>.
        If we start by plotting these points, we can sketch the graph
        of <m>y=f(x)</m> by including shapes consistent with the monotonicity
        and concavity of <m>f</m>.
        Where the monotonicity changes, the graph of <m>f(x)</m> reaches an extreme value.
        Where the concavity changes, the graph of <m>f(x)</m> has an inflection point.
        To emphasize concavity, different concavity regions 
        are colored differently<mdash/>orange for concave up, blue for concave down,
        and black for linear.
        </p>
        <sidebyside width="70%" margins="auto">
          <image>
            <latex-image-code>
              <!-- CDATA prevents certain LaTeX code from being interpreted as xml -->
              <![CDATA[\tikzset{%
              }
              \begin{tikzpicture}
              \begin{axis} [
              xmin=-3, xmax=6,
              xlabel={$x$}, ylabel={$f(x)$},
              grid=both, minor tick num={1},
              ]
              \addplot[no marks, black] coordinates {
              (-3,0)
              (6,0)
              };
              \addplot[only marks, blue] coordinates {
                (-3,0)
                (-2,-1)
                (0,3)
                (1,7)
                (3,11)
                (4,10)
                (5,9)
                (6,10)
              };
              \addplot[orange,thick,domain=-3:0,samples=21] {-1+(x+2)^2};
              \addplot[black,thick,domain=0:1,samples=2] {3+4*x};
              \addplot[blue,thick,domain=1:4,samples=21] {11-(x-3)^2};
              \addplot[orange,thick,domain=4:6,samples=21] {9+(x-5)^2};
              \end{axis}
              \end{tikzpicture}]]>
            </latex-image-code>
          </image>
        </sidebyside>
      </solution>
    </example>
    
    <p>
    As we conclude this section, make note of the relationship between
    our understanding the behavior of sequences in terms of increments 
    and accumulation sequences
    with the behavior of accumulation functions 
    in terms of the derivative or rate of accumulation.
    Where the behavior of a sequence is described in terms of a range of index values,
    the behavior of a function is described in terms of an interval.
    </p>
  </subsection>
  <conclusion>
    <title>Summary</title>
    <ul>
      <li>
      An accumulation function <m>A(x)</m> is a function defined using a definite integral
      in order to have a given rate of accumulation <m>f(x)</m> 
      and initial value <m>A(x_0) = A_0</m>,
      <me>A(x) = A_0 + \int_{x_0}^x f(z)\, dz.</me>
      The integration variable <m>z</m> is a dummy variable and must be different 
      from the independent variable.
      </li>
      <li>
      The accumulation rate <m>f(x)</m> will later be shown (Fundamental Theorem of Calculus)
      to be the derivative of the accumulation function <m>A(x)</m>
      so that we will write <m>A'(x) = f(x)</m>.
      </li>
      <li>
      Knowing an accumulation function can be used 
      to compute definite integrals of the accumulation rate,
      <me>\int_a^b f(x) \, dx = A(b) - A(a)</me>.
      See <xref ref="thm-definite-integral-accumulation-change"/>.
      </li>
      <li>
        <p>
        A function <m>f(x)</m> that can be written as an accumulation 
        with rate (derivative) <m>f'(x)</m> has a monotonicity 
        determined by the sign of <m>f'(x)</m> on intervals.
        <ul>
          <li><m>f'(x) \gt 0</m> on <m>(a,b)</m> implies <m>f(x)</m> is increasing on <m>[a,b]</m></li>
          <li><m>f'(x) = 0</m> on <m>(a,b)</m> implies <m>f(x)</m> is constant on <m>[a,b]</m></li>
          <li><m>f'(x) \lt 0</m> on <m>(a,b)</m> implies <m>f(x)</m> is decreasing on <m>[a,b]</m></li>
        </ul>
        </p>
      </li>
      <li>
        <p>
        A function <m>f(x)</m> that can be written as an accumulation 
        with rate (derivative) <m>f'(x)</m> 
        which itself can also be written as an accumulation <m>f''(x)</m>
        (second derivative of <m>f</m>) has concavity determined
        by the sign of <m>f''(x)</m> on intervals.
        <ul>
          <li><m>f''(x) \gt 0</m> on <m>(a,b)</m> implies <m>f'(x)</m> is increasing on <m>[a,b]</m>
          and <m>f(x)</m> is concave up on <m>[a,b]</m></li>
          <li><m>f''(x) = 0</m> on <m>(a,b)</m> implies <m>f'(x)</m> is constant on <m>[a,b]</m>
          and <m>f(x)</m> is linear on <m>[a,b]</m></li>
          <li><m>f''(x) \lt 0</m> on <m>(a,b)</m> implies <m>f'(x)</m> is decreasing on <m>[a,b]</m>
          and <m>f(x)</m> is concave down on <m>[a,b]</m></li>
        </ul>
        </p>
      </li>
    </ul>
  </conclusion>
  <exercises>
    <exercisegroup>
      <introduction>
        <p>
        Express each accumulation function with its given rate of accumulation
        and initial value as a formula involving a definite integral.
        Then, using the properties of definite integrals and the elementary 
        accumulation functions, find the algebraic formula.
        </p>
      </introduction>
      <exercise>
        <statement>
          <p>
          Find <m>f(x)</m> with <m>f'(x)=2x+5</m> and <m>f(0)= 2</m>.
          </p>
        </statement>
      </exercise>
      <exercise>
        <statement>
          <p>
          Find <m>g(x)</m> with <m>g'(x)=x^2-4x</m> and <m>g(0)= -5</m>.
          </p>
        </statement>
      </exercise>
      <exercise>
        <statement>
          <p>
          Find <m>A(x)</m> with <m>A'(x)=x</m> and <m>A(2)= 0</m>.
          </p>
        </statement>
      </exercise>
      <exercise>
        <statement>
          <p>
          Find <m>P(t)</m> with <m>P'(t)=2t+5</m> and <m>P(2)= 5</m>.
          </p>
        </statement>
      </exercise>
      <exercise>
        <statement>
          <p>
          Find <m>Q(t)</m> with <m>Q'(t)=t^2+5t</m> and <m>Q(1)= 2</m>.
          </p>
        </statement>
      </exercise>
    </exercisegroup>
    <exercisegroup>
      <introduction>
        <p>
        For each accumulation function, describe the monotonicity.
        </p>
      </introduction>
      <exercise>
        <statement>
          <p><m>\displaystyle f(x) = \int_2^x 4z-7 \, dz</m></p>
        </statement>
      </exercise>
      <exercise>
        <statement>
          <p><m>\displaystyle g(t) = \int_1^t 5-2x \, dx</m></p>
        </statement>
      </exercise>
      <exercise>
        <statement>
          <p><m>\displaystyle A(x) = 2+\int_{-3}^{x} 9-u^2 \, du</m></p>
        </statement>
      </exercise>
      <exercise>
        <statement>
          <p><m>\displaystyle Q(x) = -3+\int_{0}^{x} \frac{2z}{z^2-4} \, dz</m></p>
        </statement>
      </exercise>
      <exercise>
        <statement>
          <p><m>\displaystyle R(t) = \int_{-1}^{x} \frac{2z}{3z-1} \, dz</m></p>
        </statement>
      </exercise>
    </exercisegroup>
    <exercisegroup>
      <introduction>
        <p>
        Use technology to find derivatives in order to describe
        the monotonicity and concavity of each function.
        Compare your results to a graph of <m>y=f(x)</m>.
        </p>
      </introduction>
      <exercise>
        <statement>
          <p>
          <m>f(x) = x^2 - 12x + 32</m>
          </p>
        </statement>
      </exercise>
      <exercise>
        <statement>
          <p>
          <m>f(x) = x^3 - 12x + 4</m>
          </p>
        </statement>
      </exercise>
      <exercise>
        <statement>
          <p>
          <m>f(x) = x^3 + 6x^2 - 15x</m>
          </p>
        </statement>
      </exercise>
      <exercise>
        <statement>
          <p>
          <m>f(x) = e^{2x}-4x</m>
          </p>
        </statement>
      </exercise>
      <exercise>
        <statement>
          <p>
          <m>f(x) = 5xe^{-3x}</m>
          </p>
        </statement>
      </exercise>
      <exercise>
        <statement>
          <p>
          <m>\displaystyle f(x) = \frac{\ln(x)}{x}</m>
          </p>
        </statement>
      </exercise>
    </exercisegroup>
    <exercisegroup>
      <introduction>
        <p>
        Each figure represents the graph of the derivative or rate of accumulation.
        Describe the monotonicity and concavity of the corresponding accumulation function
        and sketch a graph consistent with the given initial value.
        </p>
      </introduction>
      <exercise>
        <statement>
<<<<<<< HEAD
          <sidebyside width="60%" margins="auto">
            <image>
              <latex-image-code>
                \begin{tikzpicture}
                \begin{axis}
                [
                  xmin=-4, xmax=4
                ]
                \end{axis};
                \end{tikzpicture}
=======
          <p>
          Given: graph of <m>y=f'(x)</m> and <m>f(0)=4</m>.
          </p>
          <sidebyside width="60%" margins="0% 100%">
            <image>
              <latex-image-code>
              \begin{tikzpicture}
              \begin{axis}
                [
                  xmin=-4, xmax=4,
                  ymin=-5, ymax=5,
                  axis lines=center,
                  grid=both, minor tick num={1},
                ]
                \addplot [blue,thick,no marks] coordinates {
                  (-4,-4) (-1,2) (1,-2) (4,4)
                };
              \end{axis}
              \end{tikzpicture}
              </latex-image-code>
            </image>
          </sidebyside>
        </statement>
      </exercise>
      <exercise>
        <statement>
          <p>
          Given: graph of <m>y=f'(x)</m> and <m>f(2)=-1</m>.
          </p>
          <sidebyside width="60%" margins="0% 100%">
            <image>
              <latex-image-code>
              \begin{tikzpicture}
              \begin{axis}
                [
                  xmin=-5, xmax=5,
                  ymin=-5, ymax=5,
                  axis lines=center,
                  grid=both, minor tick num={1},
                ]
                \addplot [blue,thick,no marks] coordinates {
                  (-5,-4) (-2,2) (0,-2)
                };
                \addplot [blue,thick,no marks] coordinates {
                  (0,2) (2,-2) (5,4)
                };
                \addplot [only marks, blue, mark=o] coordinates {
                  (0,-2) (0,2)
                };
              \end{axis}
              \end{tikzpicture}
              </latex-image-code>
            </image>
          </sidebyside>
        </statement>
      </exercise>
      <exercise>
        <statement>
          <p>
          Given: graph of <m>y=f'(x)</m> and <m>f(1)=3</m>.
          </p>
          <sidebyside width="60%" margins="0% 100%">
            <image>
              <latex-image-code>
              \begin{tikzpicture}
              \begin{axis}
                [
                  xmin=-5, xmax=5,
                  ymin=-5, ymax=5,
                  axis lines=center,
                  grid=both, minor tick num={1},
                ]
                \addplot [blue,thick,no marks] coordinates {
                  (-5,4) (-3,-4) (-2,-4) (-1,0)
                  (1,0) (2,-4) (3,-4) (5,4)
                };
              \end{axis}
              \end{tikzpicture}
>>>>>>> refs/remotes/origin/master
              </latex-image-code>
            </image>
          </sidebyside>
        </statement>
      </exercise>
    </exercisegroup>
  </exercises>
</section>